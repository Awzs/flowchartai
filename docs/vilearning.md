# ViLearning äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

> **æœ€åæ›´æ–°**ï¼š2025-10-26
> **ç‰ˆæœ¬**ï¼šV2.0.0ï¼ˆæˆ˜ç•¥é‡æ„ç‰ˆï¼‰
> **æ–‡æ¡£æ€§è´¨**ï¼šäº§å“å®šä¹‰æ–‡æ¡£ï¼ˆProduct Definition Documentï¼‰

---

## ğŸ“‹ æ–‡æ¡£æ‘˜è¦

### æ ¸å¿ƒå˜æ›´ï¼ˆV1.0 â†’ V2.0ï¼‰
| ç»´åº¦ | V1.0 | V2.0 | å˜æ›´åŸå›  |
|------|------|------|---------|
| **äº§å“å®šä½** | å‚ç›´åœºæ™¯å·¥å…·ï¼ˆç•™å­¦+ADHDï¼‰ | é€šç”¨ç©ºé—´åŒ–å­¦ä¹ å¹³å° | é¿å…è¿‡æ—©ç»†åˆ†ï¼Œæ‰©å¤§å¸‚åœº |
| **æ ¸å¿ƒç”¨æˆ·** | å•†ç§‘ç•™å­¦ç”Ÿã€ADHDå­¦ä¹ è€… | çŸ¥è¯†å·¥ä½œè€…ã€ç»ˆèº«å­¦ä¹ è€… | èšç„¦é«˜é¢‘åœºæ™¯ |
| **æŠ€æœ¯å£å’** | ç™½æ¿+AIåŠŸèƒ½ç»„åˆ | ä¸Šä¸‹æ–‡æ„ŸçŸ¥AI + ç©ºé—´è®°å¿† | æ„å»ºçœŸæ­£æŠ¤åŸæ²³ |
| **å•†ä¸šæ¨¡å¼** | KOLåˆ†æˆ + è®¢é˜… | Freemium + APIå¼€æ”¾ | æ ‡å‡†SaaSæ¨¡å¼ |
| **é˜¶æ®µè§„åˆ’** | 3é˜¶æ®µï¼ˆåŠŸèƒ½é©±åŠ¨ï¼‰ | 5é˜¶æ®µï¼ˆä»·å€¼éªŒè¯é©±åŠ¨ï¼‰ | MVPä¼˜å…ˆéªŒè¯ |

---

## ä¸€ã€äº§å“å®šä¹‰

### 1.1 ä¸€å¥è¯å®šä½

> **ViLearning æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„ç©ºé—´åŒ–å­¦ä¹ ç”»å¸ƒï¼Œè®©ä»»ä½•äººéƒ½èƒ½æŠŠç¢ç‰‡ä¿¡æ¯è‡ªåŠ¨è½¬åŒ–ä¸ºå¯äº¤äº’çš„çŸ¥è¯†ç½‘ç»œã€‚**

**å¯¹æ ‡ç±»æ¯”**ï¼š
- **NotebookLMï¼ˆGoogleï¼‰çš„çŸ¥è¯†ç†è§£èƒ½åŠ›** + **Miro çš„ç©ºé—´åŒ–ç”»å¸ƒ** + **ChatGPT çš„å¯¹è¯äº¤äº’**

### 1.2 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

**ä¸ºç”¨æˆ·è§£å†³çš„3ä¸ªæ ¹æœ¬é—®é¢˜**ï¼š

1. **ä¿¡æ¯è¿‡è½½ â†’ AI è‡ªåŠ¨ç»“æ„åŒ–**
   - ç—›ç‚¹ï¼šPDFã€ç½‘é¡µã€ç¬”è®°æ•£è½å„å¤„ï¼Œæ— æ³•å»ºç«‹è”ç³»
   - æ–¹æ¡ˆï¼šä¸Šä¼ å³ç†è§£ï¼ŒAI è‡ªåŠ¨æå–æ ¸å¿ƒæ¦‚å¿µå¹¶ç”ŸæˆçŸ¥è¯†å›¾è°±

2. **ç¢ç‰‡åŒ–å­¦ä¹  â†’ ç©ºé—´åŒ–è®°å¿†**
   - ç—›ç‚¹ï¼šå­¦äº†å°±å¿˜ï¼ŒçŸ¥è¯†ç‚¹å­¤ç«‹å­˜åœ¨
   - æ–¹æ¡ˆï¼šçŸ¥è¯†åœ¨ç”»å¸ƒä¸Šå‘ˆç°ç½‘ç»œç»“æ„ï¼Œè§†è§‰åŒ–åŠ æ·±è®°å¿†

3. **è¢«åŠ¨æ‘„å– â†’ ä¸»åŠ¨æ¢ç´¢**
   - ç—›ç‚¹ï¼šä¼ ç»Ÿå­¦ä¹ æ˜¯çº¿æ€§çš„ï¼ˆçœ‹è§†é¢‘/è¯»æ–‡ç« ï¼‰ï¼Œç¼ºä¹äº’åŠ¨
   - æ–¹æ¡ˆï¼šé€‰ä¸­ä»»æ„å†…å®¹è¿½é—® AIï¼ŒçŸ¥è¯†å›¾è°±åŠ¨æ€ç”Ÿé•¿

### 1.3 ç›®æ ‡ç”¨æˆ·ç”»åƒ

#### ä¸»è¦ç”¨æˆ·ï¼ˆ70%ï¼‰ï¼šçŸ¥è¯†å·¥ä½œè€…
- **å…¸å‹è§’è‰²**ï¼šç ”ç©¶ç”Ÿã€äº§å“ç»ç†ã€å’¨è¯¢é¡¾é—®ã€å†…å®¹åˆ›ä½œè€…
- **æ ¸å¿ƒéœ€æ±‚**ï¼šæ–‡çŒ®ç»¼è¿°ã€ç«å“åˆ†æã€çŸ¥è¯†æ•´åˆã€æ–¹æ¡ˆè¾“å‡º
- **ä½¿ç”¨åœºæ™¯**ï¼š
  - ç ”ç©¶ç”Ÿï¼š20 ç¯‡è®ºæ–‡ç»¼è¿°ï¼Œéœ€è¦æç‚¼æ–¹æ³•è®ºå¹¶å¯¹æ¯”
  - äº§å“ç»ç†ï¼š10 ä»½ç«å“æŠ¥å‘Šï¼Œéœ€è¦ç”Ÿæˆå·®å¼‚åŒ–çŸ©é˜µ
  - å’¨è¯¢é¡¾é—®ï¼š50 é¡µè¡Œä¸šæŠ¥å‘Šï¼Œéœ€è¦æå–å…³é”®æ´å¯Ÿ

#### æ¬¡è¦ç”¨æˆ·ï¼ˆ20%ï¼‰ï¼šç»ˆèº«å­¦ä¹ è€…
- **å…¸å‹è§’è‰²**ï¼šåœ¨èŒå­¦ä¹ æ–°æŠ€èƒ½ï¼ˆç¼–ç¨‹ã€è®¾è®¡ã€è¥é”€ç­‰ï¼‰
- **æ ¸å¿ƒéœ€æ±‚**ï¼šçŸ¥è¯†ä½“ç³»æ­å»ºã€å­¦ä¹ è·¯å¾„è§„åˆ’ã€ç¢ç‰‡æ—¶é—´åˆ©ç”¨
- **ä½¿ç”¨åœºæ™¯**ï¼š
  - å‰ç«¯å­¦ä¹ è€…ï¼š5 ä¸ª React æ•™ç¨‹ï¼Œéœ€è¦æ„å»ºå®Œæ•´çŸ¥è¯†æ ‘
  - è½¬è¡Œè€…ï¼š3 é—¨è¯¾ç¨‹ + 10 ç¯‡åšå®¢ï¼Œéœ€è¦æ•´åˆä¸ºèƒ½åŠ›åœ°å›¾

#### æ½œåœ¨ç”¨æˆ·ï¼ˆ10%ï¼‰ï¼šå›¢é˜Ÿåä½œ
- **å…¸å‹è§’è‰²**ï¼šåˆ›ä¸šå›¢é˜Ÿã€è¿œç¨‹å›¢é˜Ÿã€æ•™å­¦å›¢é˜Ÿ
- **æ ¸å¿ƒéœ€æ±‚**ï¼šå¼‚æ­¥çŸ¥è¯†å…±å»ºã€ä¼šè®®æ•ˆç‡æå‡ã€å†³ç­–é€æ˜åŒ–
- **ä½¿ç”¨åœºæ™¯**ï¼š
  - åˆ›ä¸šå›¢é˜Ÿï¼šæ¯äººç ”ç©¶ä¸€ä¸ªæ–¹å‘ï¼Œä¼šå‰ç”Ÿæˆå…±äº«çŸ¥è¯†åº“
  - æ•™å­¦å›¢é˜Ÿï¼šè€å¸ˆä¸Šä¼ è¯¾ä»¶ï¼Œå­¦ç”Ÿåä½œæ ‡æ³¨å’Œæé—®

### 1.4 ç«å“å·®å¼‚åŒ–åˆ†æ

| ç«å“ | æ ¸å¿ƒèƒ½åŠ› | ç¼ºå¤±èƒ½åŠ› | ViLearning è¶…è¶Šç‚¹ |
|------|---------|---------|------------------|
| **NotebookLM** | AI èµ„æ–™ç†è§£ + å¯¹è¯ | ç©ºé—´åŒ–å‘ˆç°ã€çŸ¥è¯†ç½‘ç»œ | âœ… æ€ç»´å¯¼å›¾è‡ªåŠ¨ç”Ÿæˆ + ç™½æ¿ç¼–è¾‘ |
| **Miro/FigJam** | æ— é™ç™½æ¿ + åä½œ | AI å†…å®¹ç”Ÿæˆã€èµ„æ–™æ‘„å– | âœ… AI é©±åŠ¨å†…å®¹ç”Ÿæˆ + RAG æ£€ç´¢ |
| **XMind/MindMeister** | æ€ç»´å¯¼å›¾å·¥å…· | AI è‡ªåŠ¨åŒ–ã€å¤šæ–‡æ¡£æ•´åˆ | âœ… å¤šæ–‡æ¡£ AI æå– + ä¸Šä¸‹æ–‡è¿½é—® |
| **Notion AI** | ç¬”è®° + AI åŠ©æ‰‹ | ç©ºé—´åŒ–ã€çŸ¥è¯†å›¾è°± | âœ… ç½‘ç»œåŒ–çŸ¥è¯†å‘ˆç° + å¯è§†åŒ–è”åŠ¨ |
| **Obsidian** | æœ¬åœ°çŸ¥è¯†åº“ + åŒé“¾ | AI è‡ªåŠ¨åŒ–ã€åä½œ | âœ… AI è‡ªåŠ¨å»ºç«‹è¿æ¥ + äº‘ç«¯åä½œ |

**ViLearning çš„ç‹¬ç‰¹ç»„åˆ**ï¼š
- **NotebookLM çš„ AI ç†è§£** + **Miro çš„ç©ºé—´ç”»å¸ƒ** + **Obsidian çš„çŸ¥è¯†ç½‘ç»œ** + **ä¸Šä¸‹æ–‡è¿½é—®çš„åˆ›æ–°äº¤äº’**

---

## äºŒã€æ ¸å¿ƒåŠŸèƒ½å®šä¹‰

### 2.1 åŠŸèƒ½æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ViLearning åŠŸèƒ½å±‚æ¬¡                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L0: AI æ™ºèƒ½å¼•æ“å±‚ï¼ˆåº•å±‚èƒ½åŠ›ï¼‰                                 â”‚
â”‚  â”œâ”€ æ–‡æ¡£è§£æï¼ˆPDF/æ–‡æœ¬/ç½‘é¡µï¼‰                                  â”‚
â”‚  â”œâ”€ å‘é‡æ£€ç´¢ï¼ˆRAGï¼‰                                           â”‚
â”‚  â”œâ”€ LLM ç”Ÿæˆï¼ˆæµå¼è¾“å‡ºï¼‰                                       â”‚
â”‚  â””â”€ å¼•ç”¨è¿½æº¯ï¼ˆæ¥æºæ ‡æ³¨ï¼‰                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L1: å†…å®¹ç”Ÿæˆå±‚ï¼ˆç”¨æˆ·ç›´æ¥æ„ŸçŸ¥ï¼‰                                â”‚
â”‚  â”œâ”€ æ€ç»´å¯¼å›¾ï¼ˆæ¦‚å¿µç½‘ç»œï¼‰                                       â”‚
â”‚  â”œâ”€ æµç¨‹å›¾ï¼ˆæ­¥éª¤æ‹†è§£ï¼‰                                         â”‚
â”‚  â”œâ”€ å¯¹æ¯”è¡¨æ ¼ï¼ˆå¤šå¯¹è±¡åˆ†æï¼‰                                     â”‚
â”‚  â”œâ”€ æ—¶é—´çº¿ï¼ˆå†å²æ¼”è¿›ï¼‰                                         â”‚
â”‚  â””â”€ æµ‹éªŒå¡ç‰‡ï¼ˆçŸ¥è¯†æ£€éªŒï¼‰                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L2: ç©ºé—´äº¤äº’å±‚ï¼ˆæ ¸å¿ƒå·®å¼‚åŒ–ï¼‰                                  â”‚
â”‚  â”œâ”€ æ— é™ç”»å¸ƒï¼ˆPlait ç™½æ¿ï¼‰                                     â”‚
â”‚  â”œâ”€ æ‹–æ‹½ç¼–è¾‘ï¼ˆèŠ‚ç‚¹/è¿çº¿ï¼‰                                      â”‚
â”‚  â”œâ”€ ä¸Šä¸‹æ–‡é€‰æ‹©ï¼ˆæ¡†é€‰è¿½é—®ï¼‰â† ğŸ”¥ åˆ›æ–°ç‚¹                          â”‚
â”‚  â””â”€ è‡ªåŠ¨å¸ƒå±€ï¼ˆåŠ›å¯¼å‘ç®—æ³•ï¼‰                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L3: åä½œä¸æ‰©å±•å±‚ï¼ˆé•¿æœŸä»·å€¼ï¼‰                                  â”‚
â”‚  â”œâ”€ å®æ—¶åä½œï¼ˆå¤šäººåŒæ­¥ï¼‰                                       â”‚
â”‚  â”œâ”€ ç‰ˆæœ¬å†å²ï¼ˆå›æº¯ï¼‰                                           â”‚
â”‚  â”œâ”€ å…¬å¼€åˆ†äº«ï¼ˆSEOï¼‰                                           â”‚
â”‚  â””â”€ API å¼€æ”¾ï¼ˆç”Ÿæ€ï¼‰                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç”¨æˆ·æ—…ç¨‹ï¼ˆHappy Pathï¼‰

#### åœºæ™¯ï¼šç ”ç©¶ç”Ÿæ–‡çŒ®ç»¼è¿°

```
ç¬¬1æ­¥ï¼šä¸Šä¼ èµ„æ–™
  ç”¨æˆ·ï¼šæ‹–å…¥ 10 ç¯‡ PDF è®ºæ–‡åˆ°ç”»å¸ƒ
  ç³»ç»Ÿï¼šæ˜¾ç¤ºä¸Šä¼ è¿›åº¦ â†’ 30 ç§’å†…å®Œæˆè§£æå’Œå‘é‡åŒ–

ç¬¬2æ­¥ï¼šAI è‡ªåŠ¨ç”Ÿæˆ
  ç”¨æˆ·ï¼šè¾“å…¥"æå–æ‰€æœ‰è®ºæ–‡çš„ç ”ç©¶æ–¹æ³•"
  ç³»ç»Ÿï¼šAI åˆ†æ 10 ç¯‡è®ºæ–‡ â†’ ç”Ÿæˆæ€ç»´å¯¼å›¾ï¼ˆæ ¹èŠ‚ç‚¹=ç ”ç©¶æ–¹æ³•åˆ†ç±»ï¼‰
  æ•ˆæœï¼šè‡ªåŠ¨èšç±»ä¸º"å®šé‡ç ”ç©¶"ã€"å®šæ€§ç ”ç©¶"ã€"æ··åˆæ–¹æ³•"3ä¸ªåˆ†æ”¯

ç¬¬3æ­¥ï¼šæ·±å…¥æ¢ç´¢
  ç”¨æˆ·ï¼šç‚¹å‡»"å®šé‡ç ”ç©¶"èŠ‚ç‚¹ â†’ æ¡†é€‰ â†’ è¿½é—®"è¿™äº›æ–¹æ³•çš„æ•°å­¦åŸç†æ˜¯ä»€ä¹ˆ"
  ç³»ç»Ÿï¼šAI åŸºäºä¸Šä¸‹æ–‡ç”Ÿæˆè¯¦ç»†è§£é‡Šå¡ç‰‡ â†’ è‡ªåŠ¨è¿çº¿åˆ°åŸèŠ‚ç‚¹

ç¬¬4æ­¥ï¼šå¯¹æ¯”åˆ†æ
  ç”¨æˆ·ï¼šæ¡†é€‰ 3 ä¸ªæ–¹æ³•èŠ‚ç‚¹ â†’ å³é”®"ç”Ÿæˆå¯¹æ¯”è¡¨æ ¼"
  ç³»ç»Ÿï¼šAI æå–å·®å¼‚ç»´åº¦ï¼ˆæ ·æœ¬é‡ã€å·¥å…·ã€ä¼˜ç¼ºç‚¹ï¼‰â†’ ç”Ÿæˆè¡¨æ ¼èŠ‚ç‚¹

ç¬¬5æ­¥ï¼šå¯¼å‡ºè¾“å‡º
  ç”¨æˆ·ï¼šç‚¹å‡»"å¯¼å‡ºä¸º Markdown"
  ç³»ç»Ÿï¼šä¿ç•™èŠ‚ç‚¹å±‚çº§ + å¼•ç”¨æ ‡æ³¨ â†’ ç”Ÿæˆå¯ç›´æ¥ç”¨äºè®ºæ–‡çš„æ–‡æœ¬
```

**å…³é”®æŒ‡æ ‡**ï¼š
- æ—¶é—´èŠ‚çº¦ï¼šä» 8 å°æ—¶æ‰‹åŠ¨æ•´ç† â†’ 30 åˆ†é’Ÿï¼ˆèŠ‚çœ 93%ï¼‰
- å¼•ç”¨å‡†ç¡®æ€§ï¼š>90%ï¼ˆè‡ªåŠ¨é«˜äº®åŸæ–‡ï¼‰
- çŸ¥è¯†ç•™å­˜ï¼šç©ºé—´åŒ–å‘ˆç°æå‡è®°å¿† 40%ï¼ˆå¿ƒç†å­¦ç ”ç©¶æ”¯æŒï¼‰

### 2.3 åŠŸèƒ½ä¼˜å…ˆçº§çŸ©é˜µï¼ˆMoSCoWï¼‰

| ä¼˜å…ˆçº§ | åŠŸèƒ½ | ç†ç”± | é¢„æœŸä¸Šçº¿ |
|--------|------|------|---------|
| **Must Haveï¼ˆP0ï¼‰** | AI æ€ç»´å¯¼å›¾ç”Ÿæˆ | æ ¸å¿ƒä»·å€¼éªŒè¯ | é˜¶æ®µ 0 |
| **Must Haveï¼ˆP0ï¼‰** | æ–‡æœ¬/PDF ä¸Šä¼  + RAG | èµ„æ–™æ‘„å–åŸºç¡€ | é˜¶æ®µ 1 |
| **Must Haveï¼ˆP0ï¼‰** | ä¸Šä¸‹æ–‡é€‰æ‹©è¿½é—® | æ ¸å¿ƒå·®å¼‚åŒ– | é˜¶æ®µ 2 |
| **Must Haveï¼ˆP0ï¼‰** | å¼•ç”¨è¿½æº¯ | å­¦æœ¯åœºæ™¯åˆšéœ€ | é˜¶æ®µ 1 |
| **Should Haveï¼ˆP1ï¼‰** | ç™½æ¿æ‹–æ‹½ç¼–è¾‘ | æå‡å¯æ§æ€§ | é˜¶æ®µ 0 |
| **Should Haveï¼ˆP1ï¼‰** | å¤šæ¨¡æ€è¾“å‡ºï¼ˆæµç¨‹å›¾/è¡¨æ ¼ï¼‰ | ä¸°å¯Œåœºæ™¯ | é˜¶æ®µ 3 |
| **Could Haveï¼ˆP2ï¼‰** | å®æ—¶åä½œ | å›¢é˜Ÿåœºæ™¯ | é˜¶æ®µ 4 |
| **Could Haveï¼ˆP2ï¼‰** | å…¬å¼€åˆ†äº« | å¢é•¿å¼•æ“ | é˜¶æ®µ 4 |
| **Won't Haveï¼ˆåˆ é™¤ï¼‰** | å‚ç›´åœºæ™¯æ¨¡æ¿ï¼ˆç•™å­¦/ADHDï¼‰ | è¿‡æ—©ç»†åˆ† | - |
| **Won't Haveï¼ˆåˆ é™¤ï¼‰** | Display ç±»å‹æ‰‹åŠ¨é€‰æ‹© | AI è‡ªåŠ¨åˆ¤æ–­æ›´ä¼˜ | - |

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„

### 3.1 æŠ€æœ¯æ ˆï¼ˆåŸºäºç°æœ‰ä»£ç åº“ï¼‰

#### å‰ç«¯æŠ€æœ¯æ ˆ
```yaml
æ¡†æ¶: Next.js 15 (App Router) âœ… å·²æœ‰
ç™½æ¿å¼•æ“: Plait âœ… å·²æœ‰ï¼ˆpackages/drawnixï¼‰
UIç»„ä»¶: Radix UI + TailwindCSS âœ… å·²æœ‰
çŠ¶æ€ç®¡ç†:
  - TanStack Queryï¼ˆæœåŠ¡ç«¯çŠ¶æ€ï¼‰âœ… å·²æœ‰
  - Zustandï¼ˆå®¢æˆ·ç«¯çŠ¶æ€ï¼‰âœ… å·²æœ‰
  - LocalForageï¼ˆæœ¬åœ°æŒä¹…åŒ–ï¼‰âœ… å·²æœ‰
å›½é™…åŒ–: next-intl âœ… å·²æœ‰
```

#### åç«¯æŠ€æœ¯æ ˆ
```yaml
æ•°æ®åº“: PostgreSQL + Drizzle ORM âœ… å·²æœ‰
è®¤è¯: Better Auth âœ… å·²æœ‰
AIæœåŠ¡:
  - LLM: DeepSeek v3.1ï¼ˆæµå¼è¾“å‡ºï¼‰âš ï¸ éœ€é›†æˆ
  - å‘é‡åµŒå…¥: ç«å±±å¼•æ“ Doubao âš ï¸ éœ€é›†æˆ
  - å‘é‡å­˜å‚¨: pgvector æ’ä»¶ âš ï¸ éœ€å®‰è£…
æ–‡æ¡£å¤„ç†: pdf-parse + LangChain âš ï¸ éœ€é›†æˆ
äº‘å­˜å‚¨: é˜¿é‡Œäº‘ OSSï¼ˆå·²æœ‰é…ç½®ï¼‰âœ… å·²æœ‰
```

### 3.2 æ ¸å¿ƒæ•°æ®æ¨¡å‹

#### ç™½æ¿æ•°æ®ç»“æ„
```typescript
// packages/drawnix/src/types/board.ts
interface Board {
  id: string;
  userId: string;
  title: string;
  nodes: Node[];          // æ‰€æœ‰èŠ‚ç‚¹
  edges: Edge[];          // æ‰€æœ‰è¿çº¿
  viewport: Viewport;     // è§†å›¾çŠ¶æ€
  createdAt: Date;
  updatedAt: Date;
}

interface Node {
  id: string;
  type: 'mindmap' | 'flowchart' | 'table' | 'timeline' | 'quiz';
  position: { x: number; y: number };
  data: {
    content: string;      // èŠ‚ç‚¹å†…å®¹
    children?: Node[];    // å­èŠ‚ç‚¹ï¼ˆæ ‘å½¢ç»“æ„ï¼‰
    sourceIds?: string[]; // å¼•ç”¨çš„æ–‡æ¡£ID
    citations?: Citation[]; // å¼•ç”¨ç‰‡æ®µ
  };
  style?: NodeStyle;
}

interface Edge {
  id: string;
  source: string;         // èµ·å§‹èŠ‚ç‚¹ID
  target: string;         // ç›®æ ‡èŠ‚ç‚¹ID
  type: 'auto' | 'manual'; // AIç”Ÿæˆ vs ç”¨æˆ·æ‰‹åŠ¨
  label?: string;
}

interface Citation {
  documentId: string;
  chunkId: string;
  text: string;           // å¼•ç”¨åŸæ–‡
  similarity: number;     // ç›¸ä¼¼åº¦åˆ†æ•°
}
```

#### æ–‡æ¡£å‘é‡å­˜å‚¨
```sql
-- src/db/schema/documents.ts
CREATE TABLE documents (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  title TEXT,
  content TEXT,
  file_url TEXT,
  created_at TIMESTAMP
);

CREATE TABLE document_chunks (
  id UUID PRIMARY KEY,
  document_id UUID REFERENCES documents(id),
  content TEXT,
  embedding VECTOR(1024), -- Doubao Embedding ç»´åº¦
  metadata JSONB,
  created_at TIMESTAMP
);

-- åˆ›å»ºå‘é‡ç´¢å¼•ï¼ˆIVFFlatï¼‰
CREATE INDEX ON document_chunks
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);
```

### 3.3 AI æœåŠ¡æ¶æ„

#### API è·¯ç”±è®¾è®¡
```typescript
// src/app/api/ai/generate/route.ts
POST /api/ai/generate
{
  "query": "æå–ç ”ç©¶æ–¹æ³•",
  "documentIds": ["doc1", "doc2"],
  "context": {
    "selectedNodes": ["node1"], // ä¸Šä¸‹æ–‡é€‰æ‹©
    "conversationHistory": [...] // å¯¹è¯å†å²
  },
  "outputType": "auto" // AIè‡ªåŠ¨åˆ¤æ–­
}

Responseï¼ˆSSEæµå¼ï¼‰:
data: {"type":"chunk","content":"## ç ”ç©¶æ–¹æ³•\n"}
data: {"type":"chunk","content":"### å®šé‡ç ”ç©¶\n"}
data: {"type":"citation","documentId":"doc1","text":"..."}
data: {"type":"complete","nodeData":{...}}
```

#### RAG æ£€ç´¢æµç¨‹
```python
# ä¼ªä»£ç ï¼šRAG Pipeline
def generate_content(query, document_ids, context):
    # 1. å‘é‡æ£€ç´¢
    query_embedding = doubao_embed(query)
    chunks = vector_search(
        embedding=query_embedding,
        document_ids=document_ids,
        top_k=5,
        similarity_threshold=0.7
    )

    # 2. ä¸Šä¸‹æ–‡æ„å»º
    prompt = build_prompt(
        query=query,
        retrieved_chunks=chunks,
        selected_nodes=context.selectedNodes,
        conversation_history=context.conversationHistory
    )

    # 3. LLM ç”Ÿæˆï¼ˆæµå¼ï¼‰
    for chunk in deepseek_stream(prompt):
        yield {
            "type": "chunk",
            "content": chunk.text
        }

    # 4. è§£æç»“æ„åŒ–è¾“å‡º
    node_data = parse_markdown_to_tree(full_response)
    yield {
        "type": "complete",
        "nodeData": node_data,
        "citations": extract_citations(chunks)
    }
```

### 3.4 æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | ç›‘æ§æ–¹å¼ |
|------|--------|---------|
| AI é¦–å­—å»¶è¿Ÿ | <2s | SSE ç¬¬ä¸€ä¸ª chunk æ—¶é—´ |
| æ€ç»´å¯¼å›¾ç”Ÿæˆ | <5sï¼ˆ1000å­—ä»¥å†…ï¼‰ | å®Œæ•´å“åº”æ—¶é—´ |
| PDF è§£æ | <30sï¼ˆ10MBï¼‰ | åå°ä»»åŠ¡ç›‘æ§ |
| å‘é‡æ£€ç´¢ | <500ms | pgvector æŸ¥è¯¢æ—¶é—´ |
| ç™½æ¿èŠ‚ç‚¹æ‹–æ‹½ | <100ms | å‰ç«¯æ€§èƒ½ç›‘æ§ |
| å¹¶å‘æ”¯æŒ | 100 QPS | å‹åŠ›æµ‹è¯• |

---

## å››ã€åˆ†é˜¶æ®µå®ç°è·¯çº¿å›¾

### é˜¶æ®µ 0ï¼šMVP éªŒè¯ï¼ˆ2-3 å‘¨ï¼‰âš¡ **å½“å‰ä¼˜å…ˆçº§**

#### ç›®æ ‡
éªŒè¯æ ¸å¿ƒå‡è®¾ï¼š**"AI ç”Ÿæˆæ€ç»´å¯¼å›¾ + ç™½æ¿å‘ˆç°" æ˜¯å¦æˆç«‹**

#### åŠŸèƒ½èŒƒå›´ï¼ˆæœ€å°åŒ–ï¼‰
```
âœ… ç”¨æˆ·è¾“å…¥æ–‡æœ¬ï¼ˆä¸æ˜¯æ–‡ä»¶ä¸Šä¼ ï¼‰
âœ… AI ç”Ÿæˆæ€ç»´å¯¼å›¾ï¼ˆå•ä¸€è¾“å‡ºç±»å‹ï¼‰
âœ… ç™½æ¿å±•ç¤º + åŸºç¡€æ‹–æ‹½
âœ… æœ¬åœ°ä¿å­˜ï¼ˆLocalForageï¼‰
âŒ æš‚ä¸åšï¼šPDFä¸Šä¼ ã€å‘é‡æ£€ç´¢ã€åä½œ
```

#### æŠ€æœ¯å®ç°
```typescript
// src/app/api/ai/simple-generate/route.ts
export async function POST(req: Request) {
  const { text } = await req.json();

  // ç›´æ¥è°ƒç”¨ DeepSeekï¼ˆä¸èµ° RAGï¼‰
  const prompt = `å°†ä»¥ä¸‹å†…å®¹è½¬æ¢ä¸ºæ€ç»´å¯¼å›¾çš„ Markdown æ ¼å¼ï¼š\n\n${text}`;

  const stream = await fetch('https://api.deepseek.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      model: 'deepseek-chat',
      messages: [{ role: 'user', content: prompt }],
      stream: true,
    }),
  });

  // è½¬æ¢ä¸º SSE æ ¼å¼è¿”å›
  return new Response(stream.body, {
    headers: { 'Content-Type': 'text/event-stream' },
  });
}
```

#### éªŒæ”¶æ ‡å‡†
- [ ] è¾“å…¥ 500 å­—æ–‡æœ¬ â†’ 3 ç§’å†…ç”Ÿæˆæ€ç»´å¯¼å›¾
- [ ] èŠ‚ç‚¹å¯æ‹–æ‹½ã€å¯ç‚¹å‡»å±•å¼€
- [ ] åˆ·æ–°é¡µé¢åæ•°æ®ä¸ä¸¢å¤±ï¼ˆLocalForageï¼‰
- [ ] ç§»åŠ¨ç«¯åŸºç¡€å¯ç”¨ï¼ˆå“åº”å¼å¸ƒå±€ï¼‰

#### æˆæœ¬é¢„ä¼°
- **å¼€å‘**ï¼š1 äºº Ã— 3 å‘¨ = $3,000
- **API**ï¼šDeepSeek $0.14/1M tokens â‰ˆ $10/æœˆï¼ˆæµ‹è¯•é˜¶æ®µï¼‰
- **åŸºç¡€è®¾æ–½**ï¼šVercel Hobbyï¼ˆå…è´¹ï¼‰

#### é‡Œç¨‹ç¢‘
- **Week 1**ï¼šAPI é›†æˆ + æµå¼è¾“å‡º
- **Week 2**ï¼šç™½æ¿èŠ‚ç‚¹æ¸²æŸ“ + æ‹–æ‹½
- **Week 3**ï¼šæœ¬åœ°ä¿å­˜ + UI ä¼˜åŒ–

---

### é˜¶æ®µ 1ï¼šèµ„æ–™æ‘„å–å¼•æ“ï¼ˆ4-5 å‘¨ï¼‰

#### ç›®æ ‡
æ”¯æŒçœŸå®æ–‡æ¡£å¤„ç†ï¼Œå®ç° **"ä¸Šä¼  PDF â†’ AI ç†è§£ â†’ ç”ŸæˆçŸ¥è¯†å›¾è°±"**

#### æ–°å¢åŠŸèƒ½
```
âœ… PDF/æ–‡æœ¬æ–‡ä»¶ä¸Šä¼ ï¼ˆé˜¿é‡Œäº‘ OSSï¼‰
âœ… æ–‡æ¡£è§£æä¸åˆ‡ç‰‡ï¼ˆLangChainï¼‰
âœ… å‘é‡åŒ–ä¸å­˜å‚¨ï¼ˆDoubao + pgvectorï¼‰
âœ… RAG æ£€ç´¢ï¼ˆç›¸ä¼¼åº¦æœç´¢ï¼‰
âœ… å¼•ç”¨è¿½æº¯ï¼ˆç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹åŸæ–‡ï¼‰
âœ… å¤šæ–‡æ¡£ç®¡ç†ï¼ˆå·¦ä¾§èµ„æ–™åº“é¢æ¿ï¼‰
```

#### æŠ€æœ¯å®ç°

##### 1. æ–‡æ¡£ä¸Šä¼ ä¸è§£æ
```typescript
// src/actions/documents.ts
export async function uploadDocument(file: File) {
  // 1. ä¸Šä¼ åˆ° OSS
  const fileUrl = await uploadToOSS(file);

  // 2. è§£æ PDF
  const pdfContent = await parsePDF(fileUrl);

  // 3. åˆ‡ç‰‡ï¼ˆæ¯ 500 å­—ä¸€ä¸ª chunkï¼‰
  const chunks = await splitText(pdfContent, {
    chunkSize: 500,
    chunkOverlap: 50, // é‡å  50 å­—ä¿æŒä¸Šä¸‹æ–‡
  });

  // 4. å‘é‡åŒ–
  const embeddings = await batchEmbed(chunks);

  // 5. å­˜å‚¨åˆ°æ•°æ®åº“
  await db.insert(documents).values({
    id: generateId(),
    userId: user.id,
    title: file.name,
    fileUrl,
  });

  await db.insert(documentChunks).values(
    chunks.map((chunk, i) => ({
      documentId: doc.id,
      content: chunk,
      embedding: embeddings[i],
    }))
  );
}
```

##### 2. RAG æ£€ç´¢
```typescript
// src/lib/ai/rag.ts
export async function retrieveContext(
  query: string,
  documentIds: string[]
) {
  // 1. æŸ¥è¯¢å‘é‡åŒ–
  const queryEmbedding = await embed(query);

  // 2. å‘é‡æœç´¢
  const results = await db.execute(sql`
    SELECT
      dc.content,
      dc.document_id,
      d.title,
      1 - (dc.embedding <=> ${queryEmbedding}) AS similarity
    FROM document_chunks dc
    JOIN documents d ON dc.document_id = d.id
    WHERE d.id = ANY(${documentIds})
      AND 1 - (dc.embedding <=> ${queryEmbedding}) > 0.7
    ORDER BY similarity DESC
    LIMIT 5
  `);

  return results;
}
```

##### 3. å¼•ç”¨è¿½æº¯ UI
```typescript
// src/components/board/CitationPopover.tsx
export function CitationPopover({ nodeId }: { nodeId: string }) {
  const citations = useCitations(nodeId);

  return (
    <Popover>
      <PopoverTrigger>
        <Badge>{citations.length} æ¡å¼•ç”¨</Badge>
      </PopoverTrigger>
      <PopoverContent>
        {citations.map(cite => (
          <div key={cite.id} className="citation-item">
            <p className="text-sm">{cite.text}</p>
            <Button
              variant="link"
              onClick={() => jumpToSource(cite.documentId, cite.chunkId)}
            >
              æŸ¥çœ‹åŸæ–‡ â†—
            </Button>
          </div>
        ))}
      </PopoverContent>
    </Popover>
  );
}
```

#### éªŒæ”¶æ ‡å‡†
- [ ] ä¸Šä¼  10MB PDF â†’ 30 ç§’å†…å®Œæˆç´¢å¼•
- [ ] ç”Ÿæˆçš„æ€ç»´å¯¼å›¾å¼•ç”¨å‡†ç¡®ç‡ >90%
- [ ] ç‚¹å‡»å¼•ç”¨è·³è½¬åˆ° PDF åŸæ–‡å¯¹åº”ä½ç½®ï¼ˆé«˜äº®ï¼‰
- [ ] æ”¯æŒåŒæ—¶ç®¡ç† 20 ä¸ªæ–‡æ¡£

#### æˆæœ¬é¢„ä¼°
- **å¼€å‘**ï¼š1 äºº Ã— 5 å‘¨ = $5,000
- **å­˜å‚¨**ï¼šé˜¿é‡Œäº‘ OSS $0.02/GB â‰ˆ $5/æœˆ
- **Embedding**ï¼šDoubao $0.0001/1k tokens â‰ˆ $20/æœˆ
- **æ•°æ®åº“**ï¼šPostgreSQL + pgvectorï¼ˆVercel Postgres Pro $20/æœˆï¼‰

---

### é˜¶æ®µ 2ï¼šä¸Šä¸‹æ–‡æ™ºèƒ½äº¤äº’ï¼ˆ3-4 å‘¨ï¼‰ğŸ”¥ **æ ¸å¿ƒå·®å¼‚åŒ–**

#### ç›®æ ‡
å®ç° **"é€‰ä¸­ç™½æ¿å†…å®¹ â†’ AI è¿½é—®"** çš„åˆ›æ–°äº¤äº’

#### æ–°å¢åŠŸèƒ½
```
âœ… æ¡†é€‰å·¥å…·ï¼ˆå¥—ç´¢é€‰æ‹©ï¼‰
âœ… ä¸Šä¸‹æ–‡èœå•ï¼ˆè¿½é—®AIã€å±•å¼€ç»†èŠ‚ã€ç”Ÿæˆæµ‹éªŒï¼‰
âœ… ä¸Šä¸‹æ–‡çª—å£ç®¡ç†ï¼ˆä¿ç•™æœ€è¿‘ 3 è½®å¯¹è¯ï¼‰
âœ… è‡ªåŠ¨å…³è”ï¼ˆæ–°èŠ‚ç‚¹è‡ªåŠ¨è¿çº¿åˆ°é€‰ä¸­å†…å®¹ï¼‰
```

#### ç”¨æˆ·æµç¨‹
```
1. ç”¨æˆ·åœ¨ç™½æ¿ä¸Šæ¡†é€‰ 2 ä¸ªèŠ‚ç‚¹ï¼ˆ"ç¥ç»ç½‘ç»œ" + "æ·±åº¦å­¦ä¹ "ï¼‰
2. å³é”® â†’ é€‰æ‹©"è¿½é—® AI"
3. è¾“å…¥ï¼š"è¿™ä¸¤è€…æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ"
4. AI åŸºäºä¸Šä¸‹æ–‡ç”Ÿæˆå¯¹æ¯”å¡ç‰‡
5. æ–°å¡ç‰‡è‡ªåŠ¨è¿çº¿åˆ°è¢«é€‰ä¸­çš„ 2 ä¸ªèŠ‚ç‚¹
```

#### æŠ€æœ¯å®ç°

##### 1. æ¡†é€‰äº¤äº’
```typescript
// packages/drawnix/src/tools/LassoTool.ts
export class LassoTool {
  onMouseDown(e: MouseEvent) {
    this.isDrawing = true;
    this.lassoPath = [{ x: e.offsetX, y: e.offsetY }];
  }

  onMouseMove(e: MouseEvent) {
    if (!this.isDrawing) return;
    this.lassoPath.push({ x: e.offsetX, y: e.offsetY });
    this.renderLasso();
  }

  onMouseUp() {
    this.isDrawing = false;
    const selectedNodes = this.getNodesInLasso();
    this.board.setSelection(selectedNodes);
    this.showContextMenu();
  }

  getNodesInLasso() {
    return this.board.nodes.filter(node =>
      this.isPointInPolygon(node.position, this.lassoPath)
    );
  }
}
```

##### 2. ä¸Šä¸‹æ–‡ä¼ é€’
```typescript
// src/app/api/ai/contextual-generate/route.ts
export async function POST(req: Request) {
  const { query, selectedNodes, conversationHistory } = await req.json();

  // 1. æå–é€‰ä¸­èŠ‚ç‚¹çš„å†…å®¹
  const contextContent = selectedNodes
    .map(node => `## ${node.data.title}\n${node.data.content}`)
    .join('\n\n');

  // 2. æ„å»º Prompt
  const prompt = `
ä½ æ˜¯ä¸€ä¸ªçŸ¥è¯†åŠ©æ‰‹ã€‚ç”¨æˆ·é€‰ä¸­äº†ä»¥ä¸‹å†…å®¹ï¼š

${contextContent}

ç”¨æˆ·çš„é—®é¢˜æ˜¯ï¼š${query}

è¯·åŸºäºé€‰ä¸­çš„å†…å®¹å›ç­”é—®é¢˜ï¼Œå¹¶ä»¥æ€ç»´å¯¼å›¾æ ¼å¼è¾“å‡ºã€‚
  `.trim();

  // 3. è°ƒç”¨ LLM
  const response = await deepseekStream(prompt);

  return new Response(response.body, {
    headers: { 'Content-Type': 'text/event-stream' },
  });
}
```

##### 3. è‡ªåŠ¨è¿çº¿
```typescript
// src/components/board/AutoConnector.ts
export function autoConnectNodes(
  newNodeId: string,
  selectedNodeIds: string[]
) {
  const newEdges = selectedNodeIds.map(sourceId => ({
    id: generateId(),
    source: sourceId,
    target: newNodeId,
    type: 'auto',
    label: 'AI ç”Ÿæˆ',
    style: { stroke: '#8b5cf6', strokeWidth: 2 },
  }));

  board.addEdges(newEdges);

  // åŠ›å¯¼å‘å¸ƒå±€é¿å…é‡å 
  layoutNodes(board.nodes, newEdges);
}
```

#### éªŒæ”¶æ ‡å‡†
- [ ] æ¡†é€‰æ“ä½œå»¶è¿Ÿ <100ms
- [ ] AI å“åº”å‡†ç¡®åŒ…å«ä¸Šä¸‹æ–‡å†…å®¹
- [ ] è¿çº¿è‡ªåŠ¨é¿å¼€å·²æœ‰èŠ‚ç‚¹ï¼ˆåŠ›å¯¼å‘ç®—æ³•ï¼‰
- [ ] æ”¯æŒå¤šè½®å¯¹è¯ï¼ˆä¿ç•™å†å²ä¸Šä¸‹æ–‡ï¼‰

#### æˆæœ¬é¢„ä¼°
- **å¼€å‘**ï¼š1 äºº Ã— 4 å‘¨ = $4,000
- **API**ï¼šDeepSeek è°ƒç”¨é‡å¢åŠ  â‰ˆ $30/æœˆ

---

### é˜¶æ®µ 3ï¼šå¤šæ¨¡æ€è¾“å‡ºï¼ˆ4-6 å‘¨ï¼‰

#### ç›®æ ‡
ä¸åªæ˜¯æ€ç»´å¯¼å›¾ï¼ŒAI è‡ªåŠ¨åˆ¤æ–­è¾“å‡ºç±»å‹ï¼ˆæµç¨‹å›¾/å¯¹æ¯”è¡¨æ ¼/æ—¶é—´çº¿/æµ‹éªŒï¼‰

#### è¾“å‡ºç±»å‹å®šä¹‰

| ç±»å‹ | é€‚ç”¨åœºæ™¯ | è§¦å‘å…³é”®è¯ | ç¤ºä¾‹ |
|------|---------|-----------|------|
| **æ€ç»´å¯¼å›¾** | æ¦‚å¿µæ€§çŸ¥è¯† | é»˜è®¤ | "è§£é‡Šæœºå™¨å­¦ä¹ " |
| **æµç¨‹å›¾** | æ­¥éª¤æ€§çŸ¥è¯† | "å¦‚ä½•"ã€"æ­¥éª¤" | "å¦‚ä½•è®­ç»ƒç¥ç»ç½‘ç»œ" |
| **å¯¹æ¯”è¡¨æ ¼** | å¤šå¯¹è±¡æ¯”è¾ƒ | "åŒºåˆ«"ã€"å¯¹æ¯”" | "React vs Vue å¯¹æ¯”" |
| **æ—¶é—´çº¿** | å†å²äº‹ä»¶ | "å†å²"ã€"å‘å±•" | "AI å‘å±•å†ç¨‹" |
| **æµ‹éªŒå¡ç‰‡** | çŸ¥è¯†æ£€éªŒ | "æµ‹è¯•æˆ‘"ã€"ç»ƒä¹ " | "æµ‹è¯•æˆ‘å¯¹æ¢¯åº¦ä¸‹é™çš„ç†è§£" |

#### æŠ€æœ¯å®ç°

##### 1. è¾“å‡ºç±»å‹åˆ¤æ–­
```typescript
// src/lib/ai/output-classifier.ts
export function classifyOutputType(query: string): OutputType {
  const keywords = {
    flowchart: ['å¦‚ä½•', 'æ€ä¹ˆ', 'æ­¥éª¤', 'æµç¨‹', 'æ–¹æ³•'],
    table: ['åŒºåˆ«', 'å¯¹æ¯”', 'æ¯”è¾ƒ', 'å·®å¼‚', 'vs'],
    timeline: ['å†å²', 'å‘å±•', 'æ¼”è¿›', 'æ—¶é—´çº¿'],
    quiz: ['æµ‹è¯•', 'ç»ƒä¹ ', 'æµ‹éªŒ', 'æ£€éªŒ'],
  };

  for (const [type, words] of Object.entries(keywords)) {
    if (words.some(word => query.includes(word))) {
      return type as OutputType;
    }
  }

  return 'mindmap'; // é»˜è®¤æ€ç»´å¯¼å›¾
}
```

##### 2. Prompt æ¨¡æ¿ç³»ç»Ÿ
```typescript
// src/lib/ai/prompts.ts
const PROMPT_TEMPLATES = {
  mindmap: `å°†ä»¥ä¸‹å†…å®¹è½¬æ¢ä¸ºæ€ç»´å¯¼å›¾ï¼ˆMarkdownæ ¼å¼ï¼‰ï¼š\n{context}\n\nè¦æ±‚ï¼š\n- ä½¿ç”¨ # è¡¨ç¤ºå±‚çº§\n- ä¿æŒé€»è¾‘æ¸…æ™°`,

  flowchart: `å°†ä»¥ä¸‹å†…å®¹è½¬æ¢ä¸ºæµç¨‹å›¾ï¼ˆMermaidæ ¼å¼ï¼‰ï¼š\n{context}\n\nè¦æ±‚ï¼š\n- ä½¿ç”¨ graph TD è¯­æ³•\n- æ˜ç¡®æ ‡æ³¨æ­¥éª¤é¡ºåº`,

  table: `ç”Ÿæˆå¯¹æ¯”è¡¨æ ¼ï¼ˆMarkdownæ ¼å¼ï¼‰ï¼š\n{context}\n\nè¦æ±‚ï¼š\n- æå–å…³é”®å·®å¼‚ç»´åº¦\n- ä½¿ç”¨è¡¨æ ¼è¯­æ³•`,

  timeline: `ç”Ÿæˆæ—¶é—´çº¿ï¼ˆJSONæ ¼å¼ï¼‰ï¼š\n{context}\n\nè¦æ±‚ï¼š\n- æŒ‰æ—¶é—´æ’åº\n- åŒ…å«å¹´ä»½å’Œäº‹ä»¶æè¿°`,

  quiz: `ç”Ÿæˆæµ‹éªŒé¢˜ç›®ï¼ˆJSONæ ¼å¼ï¼‰ï¼š\n{context}\n\nè¦æ±‚ï¼š\n- 3é“é€‰æ‹©é¢˜ + 2é“ç®€ç­”é¢˜\n- åŒ…å«æ­£ç¡®ç­”æ¡ˆå’Œè§£æ`,
};

export function buildPrompt(type: OutputType, context: string) {
  return PROMPT_TEMPLATES[type].replace('{context}', context);
}
```

#### éªŒæ”¶æ ‡å‡†
- [ ] AI åˆ¤æ–­å‡†ç¡®ç‡ >85%ï¼ˆäººå·¥æ ‡æ³¨ 100 æ¡æµ‹è¯•ï¼‰
- [ ] 5 ç§è¾“å‡ºç±»å‹ UI ç»Ÿä¸€ä¸”ç¾è§‚
- [ ] æ‰€æœ‰ç±»å‹æ”¯æŒåç»­ç¼–è¾‘
- [ ] æµç¨‹å›¾æ”¯æŒ Mermaid å®æ—¶æ¸²æŸ“

#### æˆæœ¬é¢„ä¼°
- **å¼€å‘**ï¼š1 äºº Ã— 5 å‘¨ = $5,000

---

### é˜¶æ®µ 4ï¼šåä½œä¸åˆ†äº«ï¼ˆ5-7 å‘¨ï¼‰

#### ç›®æ ‡
ä»ä¸ªäººå·¥å…·åˆ°å›¢é˜Ÿå¹³å°

#### æ–°å¢åŠŸèƒ½
```
âœ… å®æ—¶åä½œï¼ˆWebSocket åŒæ­¥ï¼‰
âœ… æƒé™ç®¡ç†ï¼ˆæŸ¥çœ‹/ç¼–è¾‘/è¯„è®ºï¼‰
âœ… è¯„è®ºç³»ç»Ÿï¼ˆèŠ‚ç‚¹çº§è¯„è®ºï¼‰
âœ… ç‰ˆæœ¬å†å²ï¼ˆGit å¼å›æº¯ï¼‰
âœ… å…¬å¼€åˆ†äº«é“¾æ¥ï¼ˆSEO å‹å¥½ï¼‰
```

#### æŠ€æœ¯å®ç°

##### 1. å®æ—¶åä½œï¼ˆYjsï¼‰
```typescript
// src/lib/collaboration/yjs-provider.ts
import * as Y from 'yjs';
import { WebsocketProvider } from 'y-websocket';

export function setupCollaboration(boardId: string) {
  const ydoc = new Y.Doc();
  const provider = new WebsocketProvider(
    'wss://vilearning.com/collab',
    boardId,
    ydoc
  );

  // ç›‘å¬è¿œç¨‹å˜æ›´
  ydoc.on('update', (update) => {
    applyUpdateToBoard(update);
  });

  // æœ¬åœ°å˜æ›´æ¨é€
  board.on('change', (change) => {
    const update = Y.encodeStateAsUpdate(ydoc);
    provider.send(update);
  });
}
```

##### 2. å…¬å¼€åˆ†äº«
```typescript
// src/app/share/[boardId]/page.tsx
export async function generateMetadata({ params }) {
  const board = await getPublicBoard(params.boardId);

  return {
    title: board.title,
    description: `æŸ¥çœ‹ ${board.author} çš„çŸ¥è¯†å›¾è°±`,
    openGraph: {
      images: [await generateBoardPreview(board)], // åŠ¨æ€ç”Ÿæˆé¢„è§ˆå›¾
    },
  };
}
```

#### éªŒæ”¶æ ‡å‡†
- [ ] 3 äººåŒæ—¶ç¼–è¾‘å»¶è¿Ÿ <500ms
- [ ] å†²çªè‡ªåŠ¨åˆå¹¶æˆåŠŸç‡ >95%
- [ ] å…¬å¼€åˆ†äº«é“¾æ¥æ”¯æŒ SEOï¼ˆOpen Graphï¼‰
- [ ] ç‰ˆæœ¬å†å²å¯å›æº¯åˆ°ä»»æ„æ—¶é—´ç‚¹

---

### é˜¶æ®µ 5ï¼šä¼ä¸šçº§èƒ½åŠ›ï¼ˆé•¿æœŸæ¼”è¿›ï¼‰

#### åŠŸèƒ½æ–¹å‘
```
1. çŸ¥è¯†åº“æ£€ç´¢ï¼ˆè·¨ç™½æ¿è¯­ä¹‰æœç´¢ï¼‰
2. å·¥ä½œæµè‡ªåŠ¨åŒ–ï¼ˆZapier å¼è¿æ¥å™¨ï¼‰
3. API å¼€æ”¾ï¼ˆå¼€å‘è€…ç”Ÿæ€ï¼‰
4. ç§æœ‰åŒ–éƒ¨ç½²ï¼ˆä¼ä¸šç‰ˆï¼‰
5. SSO é›†æˆï¼ˆä¼ä¸šè®¤è¯ï¼‰
```

---

## äº”ã€å•†ä¸šåŒ–ç­–ç•¥

### 5.1 å®šä»·æ¨¡å‹

| ç‰ˆæœ¬ | ä»·æ ¼ | é™åˆ¶ | æ ¸å¿ƒåŠŸèƒ½ | ç›®æ ‡ç”¨æˆ· |
|------|------|------|---------|---------|
| **Free** | $0 | 3 ä¸ªç™½æ¿<br>5MB å­˜å‚¨<br>æ¯æœˆ 20 æ¬¡ AI ç”Ÿæˆ | åŸºç¡€ AI ç”Ÿæˆ<br>æœ¬åœ°ä¿å­˜ | ä¸ªäººå°é²œ |
| **Pro** | $9/æœˆ<br>$90/å¹´ï¼ˆçœ 17%ï¼‰ | æ— é™ç™½æ¿<br>1GB å­˜å‚¨<br>æ¯æœˆ 500 æ¬¡ AI ç”Ÿæˆ<br>AI ä¼˜å…ˆçº§ | + PDF ä¸Šä¼ <br>+ å¼•ç”¨è¿½æº¯<br>+ å¯¼å‡ºåŠŸèƒ½ | çŸ¥è¯†å·¥ä½œè€… |
| **Team** | $49/æœˆ | 10 æˆå‘˜<br>10GB å…±äº«å­˜å‚¨<br>æ— é™ AI ç”Ÿæˆ<br>å®æ—¶åä½œ | + å¤šäººåä½œ<br>+ è¯„è®ºç³»ç»Ÿ<br>+ ç‰ˆæœ¬å†å² | åˆ›ä¸šå›¢é˜Ÿ |
| **Enterprise** | è®®ä»· | è‡ªå®šä¹‰ | + ç§æœ‰éƒ¨ç½²<br>+ SSO<br>+ API é…é¢<br>+ ä¸“å±æ”¯æŒ | å¤§ä¼ä¸š |

### 5.2 å¢é•¿ç­–ç•¥

#### 1. ç—…æ¯’ä¼ æ’­ï¼ˆViral Loopï¼‰
```
ç”¨æˆ·åˆ›å»ºå…¬å¼€ç™½æ¿
  â†“
åº•éƒ¨æ˜¾ç¤º "Powered by ViLearning"
  â†“
è®¿å®¢ç‚¹å‡» â†’ æ³¨å†Œå…è´¹è´¦å·
  â†“
æ–°ç”¨æˆ·åˆ›å»ºç™½æ¿ â†’ ç»§ç»­ä¼ æ’­
```

**å…³é”®æŒ‡æ ‡**ï¼š
- ç—…æ¯’ç³»æ•°ï¼ˆKï¼‰ç›®æ ‡ï¼š>1.2
- åˆ†äº«ç‡ï¼šæ¯ä¸ª Pro ç”¨æˆ·å¹³å‡åˆ†äº« 3 ä¸ªç™½æ¿

#### 2. æ¨¡æ¿å¸‚åœºï¼ˆUGCï¼‰
```
ç”¨æˆ·åˆ›å»ºä¼˜è´¨ç™½æ¿
  â†“
å‘å¸ƒä¸ºå…¬å¼€æ¨¡æ¿
  â†“
å…¶ä»–ç”¨æˆ·è´­ä¹°/ä½¿ç”¨
  â†“
åˆ›ä½œè€…è·å¾— 50% åˆ†æˆ
```

**ç¤ºä¾‹æ¨¡æ¿**ï¼š
- "æœºå™¨å­¦ä¹ å®Œæ•´çŸ¥è¯†æ ‘"ï¼ˆ$4.99ï¼‰
- "äº§å“ç»ç†æŠ€èƒ½åœ°å›¾"ï¼ˆ$2.99ï¼‰
- "å‰ç«¯å·¥ç¨‹å¸ˆå­¦ä¹ è·¯å¾„"ï¼ˆå…è´¹ï¼Œå¼•æµï¼‰

#### 3. æ•™è‚²æ¸ é“åˆä½œ
```
ä¸ 50 æ‰€å¤§å­¦å›¾ä¹¦é¦†åˆä½œ
  â†“
ä¸ºå­¦ç”Ÿæä¾›å…è´¹ Pro ç‰ˆï¼ˆedu é‚®ç®±è®¤è¯ï¼‰
  â†“
æ¯•ä¸šåè½¬ä¸ºä»˜è´¹ç”¨æˆ·
```

**é¢„æœŸæ•ˆæœ**ï¼š
- è·å®¢æˆæœ¬ï¼ˆCACï¼‰ï¼š$5ï¼ˆvs å¹¿å‘Šè·å®¢ $50ï¼‰
- ç•™å­˜ç‡ï¼šæ•™è‚²ç”¨æˆ·ç•™å­˜ >60%ï¼ˆvs æ™®é€šç”¨æˆ· 40%ï¼‰

#### 4. API ç”Ÿæ€ï¼ˆå¼€å‘è€…ï¼‰
```
å¼€æ”¾ APIï¼ˆå…è´¹é…é¢ 1000 æ¬¡/æœˆï¼‰
  â†“
å¼€å‘è€…æ„å»ºæ’ä»¶ï¼ˆNotion/Obsidian/VSCodeï¼‰
  â†“
æ’ä»¶ç”¨æˆ·è½¬åŒ–ä¸º ViLearning ç”¨æˆ·
```

**API å®šä»·**ï¼š
- å…è´¹ç‰ˆï¼š1000 æ¬¡/æœˆ
- Pro ç”¨æˆ·ï¼š10000 æ¬¡/æœˆ
- Enterpriseï¼šæ— é™åˆ¶

### 5.3 æ”¶å…¥é¢„æµ‹ï¼ˆ18 ä¸ªæœˆï¼‰

| æœˆä»½ | æ³¨å†Œç”¨æˆ· | ä»˜è´¹ç”¨æˆ· | MRRï¼ˆæœˆç»å¸¸æ€§æ”¶å…¥ï¼‰ | ç´¯è®¡æ”¶å…¥ |
|------|---------|---------|---------------------|---------|
| M1-3 | 500 | 10 | $90 | $270 |
| M4-6 | 2000 | 50 | $450 | $1,620 |
| M7-9 | 5000 | 150 | $1,350 | $5,670 |
| M10-12 | 10000 | 400 | $3,600 | $16,470 |
| M13-15 | 20000 | 1000 | $9,000 | $43,470 |
| M16-18 | 35000 | 2000 | $18,000 | $97,470 |

**å…³é”®å‡è®¾**ï¼š
- ä»˜è´¹è½¬åŒ–ç‡ï¼š5%ï¼ˆè¡Œä¸šå¹³å‡ 2-7%ï¼‰
- å®¢å•ä»·ï¼ˆARPUï¼‰ï¼š$9/æœˆ
- æµå¤±ç‡ï¼ˆChurnï¼‰ï¼š5%/æœˆï¼ˆå‰ 6 ä¸ªæœˆï¼‰ï¼Œ2%/æœˆï¼ˆå 12 ä¸ªæœˆï¼‰

---

## å…­ã€æˆåŠŸæŒ‡æ ‡ï¼ˆNorth Star Metricsï¼‰

### 6.1 æ ¸å¿ƒæŒ‡æ ‡

| æŒ‡æ ‡ | å®šä¹‰ | ç›®æ ‡å€¼ï¼ˆ6 ä¸ªæœˆï¼‰ | ç›‘æ§å·¥å…· |
|------|------|-----------------|---------|
| **North Star** | æ¯å‘¨æ´»è·ƒç”Ÿæˆæ¬¡æ•°ï¼ˆWeekly AI Generationsï¼‰ | 10,000 æ¬¡/å‘¨ | PostHog |
| æ¬¡è¦æŒ‡æ ‡ 1 | ä»˜è´¹è½¬åŒ–ç‡ | 5% | Stripe Dashboard |
| æ¬¡è¦æŒ‡æ ‡ 2 | ç”¨æˆ·ç•™å­˜ï¼ˆD7ï¼‰ | 40% | PostHog Retention |
| æ¬¡è¦æŒ‡æ ‡ 3 | NPS åˆ†æ•° | >50 | é—®å·è°ƒæŸ¥ |

### 6.2 åŸ‹ç‚¹éœ€æ±‚

| äº‹ä»¶å | è§¦å‘æ—¶æœº | å…³é”®å±æ€§ |
|--------|---------|---------|
| `ai_generate_start` | ç”¨æˆ·ç‚¹å‡»"ç”Ÿæˆ" | `input_type`, `document_count` |
| `ai_generate_complete` | AI ç”Ÿæˆå®Œæˆ | `output_type`, `duration`, `token_count` |
| `node_edit` | ç¼–è¾‘èŠ‚ç‚¹å†…å®¹ | `node_type`, `edit_duration` |
| `context_select` | æ¡†é€‰å†…å®¹ | `selected_node_count` |
| `board_share` | åˆ›å»ºåˆ†äº«é“¾æ¥ | `is_public` |
| `template_use` | ä½¿ç”¨æ¨¡æ¿ | `template_id` |

---

## ä¸ƒã€é£é™©ä¸åº”å¯¹

### 7.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| AI ç”Ÿæˆè´¨é‡ä¸ç¨³å®š | é«˜ | é«˜ | â€¢ å¤šæ¨¡å‹å¤‡ä»½ï¼ˆDeepSeek + GPT-4ï¼‰<br>â€¢ äººå·¥åé¦ˆè®­ç»ƒ Prompt |
| å‘é‡æ£€ç´¢å‡†ç¡®ç‡ä½ | ä¸­ | é«˜ | â€¢ è°ƒæ•´ chunk å¤§å°<br>â€¢ å¼•å…¥ Hybrid Searchï¼ˆå‘é‡+å…³é”®è¯ï¼‰ |
| ç™½æ¿æ€§èƒ½é—®é¢˜ï¼ˆ>100 èŠ‚ç‚¹ï¼‰ | ä¸­ | ä¸­ | â€¢ è™šæ‹Ÿæ»šåŠ¨<br>â€¢ Canvas åˆ†å±‚æ¸²æŸ“ |
| å®æ—¶åä½œå†²çª | ä½ | ä¸­ | â€¢ Yjs CRDT ç®—æ³•<br>â€¢ å†²çªæ£€æµ‹ UI |

### 7.2 å¸‚åœºé£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|------|---------|
| ç«å“å¿«é€Ÿè·Ÿè¿› | é«˜ | ä¸­ | â€¢ ä¸“æ³¨ä¸Šä¸‹æ–‡äº¤äº’ï¼ˆå£å’ï¼‰<br>â€¢ å¿«é€Ÿè¿­ä»£ï¼ˆ2 å‘¨ä¸€ç‰ˆï¼‰ |
| ç”¨æˆ·ä»˜è´¹æ„æ„¿ä½ | ä¸­ | é«˜ | â€¢ å…è´¹ç‰ˆåŠŸèƒ½è¶³å¤Ÿå¥½<br>â€¢ Pro ç‰ˆæä¾›æ˜ç¡®ä»·å€¼ï¼ˆå¯¼å‡º/åä½œï¼‰ |
| AI æˆæœ¬è¿‡é«˜ | ä¸­ | é«˜ | â€¢ ä¼˜åŒ– Prompt å‡å°‘ token<br>â€¢ ç¼“å­˜å¸¸è§æŸ¥è¯¢<br>â€¢ å¼•å…¥ç”¨é‡é™åˆ¶ |

---

## å…«ã€é™„å½•

### A. å‚è€ƒèµ„æ–™

- **ç«å“ç ”ç©¶**ï¼šhttps://wcntjbz8cc4a.feishu.cn/sync/CnJndwmFbsly0hb8PLYcGbeWnOf
- **ç”¨æˆ·è°ƒç ”**ï¼šhttps://wcntjbz8cc4a.feishu.cn/sync/IHO6dgbR8suYVUbPZkQcXhWLnMc
- **æŠ€æœ¯æ¶æ„**ï¼š`packages/drawnix/docs/Drawnix é˜¶æ®µæ€§æ”¹é€ è·¯çº¿è“å›¾.md`

### B. æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| **RAG** | Retrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆ |
| **pgvector** | PostgreSQL å‘é‡å­˜å‚¨æ’ä»¶ |
| **SSE** | Server-Sent Eventsï¼ŒæœåŠ¡å™¨æ¨é€äº‹ä»¶ |
| **CRDT** | Conflict-free Replicated Data Typeï¼Œæ— å†²çªå¤åˆ¶æ•°æ®ç±»å‹ |
| **Yjs** | å®æ—¶åä½œæ¡†æ¶ï¼ŒåŸºäº CRDT |
| **LangChain** | LLM åº”ç”¨å¼€å‘æ¡†æ¶ |
| **Doubao** | ç«å±±å¼•æ“å‘é‡åµŒå…¥æ¨¡å‹ |
| **DeepSeek** | å›½äº§å¤§è¯­è¨€æ¨¡å‹ |

### C. è®¾è®¡è§„èŒƒ

#### èµ›åšæœ‹å…‹ä¸»é¢˜è‰²
```css
/* ä¸»è‰²è°ƒ */
--primary-blue: #00d4ff;
--primary-purple: #8b5cf6;
--accent-pink: #ff006e;

/* èƒŒæ™¯è‰² */
--bg-dark: #0a0e27;
--bg-darker: #050816;

/* èŠ‚ç‚¹æ ·å¼ */
.mindmap-node {
  background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
  border: 2px solid var(--accent-pink);
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
}

/* è¿çº¿åŠ¨ç”» */
.edge-animated {
  stroke-dasharray: 5;
  animation: dash 1s linear infinite;
}
```

---

**æ–‡æ¡£ç»“æŸ**

> **ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼š
> 1. äº§å“å›¢é˜Ÿè¯„å®¡æœ¬æ–‡æ¡£
> 2. æŠ€æœ¯å›¢é˜Ÿè¯„ä¼°é˜¶æ®µ 0 å¯è¡Œæ€§
> 3. å¯åŠ¨ MVP å¼€å‘ï¼ˆé¢„è®¡ 2025-11-01ï¼‰
